<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Arena de Duelos - Hogwarts Ori√≥n</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Special+Elite&display=swap');

        /* --- ESTILOS DE INMERSI√ìN --- */
        body {
            margin: 0; padding: 0;
            background: #0a0a0a url('https://www.transparenttextures.com/patterns/dark-matter.png');
            color: #f4e4bc; font-family: 'Special Elite', cursive;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100vh; overflow: hidden;
            transition: background-color 0.1s ease; /* Para el efecto flash */
        }

        .arena-box {
            background: rgba(20, 15, 10, 0.95);
            width: 90%; max-width: 800px; padding: 40px;
            border: 2px solid #5c4021; border-radius: 15px;
            box-shadow: 0 0 50px rgba(0,0,0,1), 0 0 20px rgba(212, 175, 55, 0.2);
            text-align: center; position: relative;
        }

        h1 { font-family: 'Cinzel', serif; font-size: clamp(30px, 6vw, 50px); color: #d4af37; margin: 0; text-shadow: 0 0 15px rgba(212, 175, 55, 0.5); }
        .sub-header { font-size: 12px; letter-spacing: 4px; color: #888; margin-bottom: 30px; }

        /* --- SELECCI√ìN DE RIVAL --- */
        #selector-rival { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .card-rival {
            background: #1a150f; border: 1px solid #5c4021; padding: 20px; cursor: pointer; border-radius: 8px; transition: 0.3s;
        }
        .card-rival:hover { border-color: #d4af37; transform: scale(1.05); background: #2c1e11; }
        .card-rival h3 { font-family: 'Cinzel'; margin: 0; color: #d4af37; }

        /* --- ESCENARIO DE DUELO --- */
        #escenario { display: none; }
        .stats-container { display: flex; justify-content: space-between; align-items: center; margin: 30px 0; }
        .wizard-stats { width: 40%; }
        .hp-bg { background: #222; height: 20px; width: 100%; border-radius: 10px; border: 1px solid #d4af37; overflow: hidden; margin-top: 5px; }
        .hp-fill { height: 100%; width: 100%; transition: width 0.4s ease; background: linear-gradient(90deg, #2ecc71, #27ae60); }
        .hp-enemy { background: linear-gradient(90deg, #e74c3c, #c0392b); }

        /* --- HECHIZOS --- */
        .spell-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .spell-btn {
            background: #1a150f; border: 1px solid #5c4021; color: #f4e4bc;
            padding: 15px; cursor: pointer; font-family: 'Cinzel'; border-radius: 5px; transition: 0.2s;
        }
        .spell-btn:hover { background: #d4af37; color: #1a150f; border-color: #fff; }

        /* --- REGISTRO --- */
        #log {
            height: 100px; overflow-y: auto; background: #000; border: 1px solid #333;
            margin-top: 20px; padding: 15px; font-size: 14px; text-align: left; color: #d4af37;
        }
        .btn-restart { display: none; margin-top: 20px; background: #740001; color: white; border: none; padding: 10px 20px; cursor: pointer; font-family: 'Cinzel'; }

    </style>
</head>
<body>

<div class="arena-box" id="main-box">
    <h1>CLUB DE DUELO</h1>
    <div class="sub-header">HOGWARTS ORI√ìN</div>

    <div id="selector-rival">
        <div class="card-rival" onclick="iniciarDuelo('Estudiante', 100, 10, 20)">
            <h3>ESTUDIANTE</h3>
            <small>F√°cil - 100 PV</small>
        </div>
        <div class="card-rival" onclick="iniciarDuelo('Profesor', 150, 20, 35)">
            <h3>PROFESOR</h3>
            <small>Normal - 150 PV</small>
        </div>
        <div class="card-rival" onclick="iniciarDuelo('Mort√≠fago', 220, 30, 50)">
            <h3>MORT√çFAGO</h3>
            <small>DIF√çCIL - 220 PV</small>
        </div>
    </div>

    <div id="escenario">
        <div class="stats-container">
            <div class="wizard-stats">
                <div id="p-name">T√ö</div>
                <div class="hp-bg"><div id="hp-p" class="hp-fill"></div></div>
                <small id="txt-p">100 / 100 PV</small>
            </div>
            <div style="font-family: 'Cinzel'; color: #d4af37; font-size: 24px;">VS</div>
            <div class="wizard-stats">
                <div id="e-name">RIVAL</div>
                <div class="hp-bg"><div id="hp-e" class="hp-fill hp-enemy"></div></div>
                <small id="txt-e">100 / 100 PV</small>
            </div>
        </div>

        <div id="controles">
            <div class="spell-grid">
                <button class="spell-btn" onclick="lanzar('Expelliarmus', 15, 25)">‚ö° EXPELLIARMUS</button>
                <button class="spell-btn" onclick="lanzar('Desmaius', 20, 35)">üí´ DESMAIUS</button>
                <button class="spell-btn" onclick="lanzar('Rictusempra', 10, 40)">üòÇ RICTUSEMPRA</button>
                <button class="spell-btn" onclick="lanzar('Sectumsempra', 30, 55)">ü©∏ SECTUMSEMPRA</button>
            </div>
        </div>

        <div id="log">Varitas listas... ¬°Que comience el duelo!</div>
        <button id="btn-retry" class="btn-restart" onclick="location.reload()">VOLVER A LA ACADEMIA üîÑ</button>
    </div>
</div>

<audio id="snd-spell" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="snd-hit" src="https://assets.mixkit.co/active_storage/sfx/1655/1655-preview.mp3"></audio>
<audio id="snd-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

<script>
    let pHP = 100, eHP = 100, pMax = 100, eMax = 100;
    let minE = 10, maxE = 20;
    let turnLock = false;

    function iniciarDuelo(nombre, hp, dMin, dMax) {
        eMax = hp; eHP = hp;
        minE = dMin; maxE = dMax;
        document.getElementById('e-name').innerText = nombre;
        document.getElementById('txt-e').innerText = `${hp} / ${hp} PV`;
        document.getElementById('selector-rival').style.display = 'none';
        document.getElementById('escenario').style.display = 'block';
    }

    function lanzar(hechizo, min, max) {
        if(turnLock || pHP <= 0 || eHP <= 0) return;
        turnLock = true;

        // Turno Jugador
        document.getElementById('snd-spell').play();
        efectoVisual('rgba(212, 175, 55, 0.2)'); // Flash Dorado
        
        let dmg = Math.floor(Math.random() * (max - min + 1)) + min;
        eHP -= dmg;
        addLog(`ü™Ñ Has lanzado <b>${hechizo}</b>. ¬°Impacto de ${dmg} PV!`);
        actualizarBarras();

        if(eHP <= 0) return finalizar("¬°VICTORIA! El rival ha sido derrotado.");

        // Turno Enemigo
        setTimeout(() => {
            document.getElementById('snd-hit').play();
            efectoVisual('rgba(255, 0, 0, 0.2)'); // Flash Rojo de da√±o
            
            let dmgE = Math.floor(Math.random() * (maxE - minE + 1)) + minE;
            pHP -= dmgE;
            addLog(`üî• El rival contraataca. Pierdes ${dmgE} PV.`);
            actualizarBarras();

            if(pHP <= 0) finalizar("DERROTA. Has ca√≠do en el duelo.");
            else turnLock = false;
        }, 1000);
    }

    function actualizarBarras() {
        document.getElementById('hp-p').style.width = (pHP / pMax * 100) + "%";
        document.getElementById('hp-e').style.width = (eHP / eMax * 100) + "%";
        document.getElementById('txt-p').innerText = `${Math.max(0, pHP)} / ${pMax} PV`;
        document.getElementById('txt-e').innerText = `${Math.max(0, eHP)} / ${eMax} PV`;
    }

    function addLog(m) {
        const l = document.getElementById('log');
        l.innerHTML = `<div>${m}</div>` + l.innerHTML;
    }

    function efectoVisual(color) {
        document.body.style.backgroundColor = color;
        setTimeout(() => document.body.style.backgroundColor = "#0a0a0a", 100);
    }

    function finalizar(m) {
        document.getElementById('snd-win').play();
        addLog(`<h2 style="color:gold">${m}</h2>`);
        document.getElementById('controles').style.display = 'none';
        document.getElementById('btn-retry').style.display = 'block';
    }
</script>

</body>
</html>
