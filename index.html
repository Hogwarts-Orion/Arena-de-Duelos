<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Arena de Duelos - Hogwarts OriÃ³n</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Special+Elite&display=swap');

        body {
            margin: 0;
            background: #0a0a0a url('https://www.transparenttextures.com/patterns/dark-matter.png');
            color: #f4e4bc;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
            font-family: 'Special Elite', cursive;
            min-height: 100vh;
        }

        .arena-container {
            background: rgba(20, 15, 10, 0.95);
            width: 95%; max-width: 800px; padding: 40px;
            box-shadow: 0 0 100px rgba(0,0,0,1), 0 0 20px rgba(212, 175, 55, 0.2);
            border: 2px solid #5c4021; border-radius: 15px;
            text-align: center; margin-top: 20px;
        }

        h1 { font-family: 'Cinzel', serif; font-size: 45px; color: #d4af37; margin: 0; text-shadow: 0 0 15px rgba(212, 175, 55, 0.5); }
        .sub { font-size: 14px; letter-spacing: 3px; color: #888; margin-bottom: 30px; }

        .stage {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.5); padding: 30px; border-radius: 10px;
            border: 1px solid #333; margin-bottom: 20px;
        }

        .wizard { width: 40%; }
        .hp-container { background: #222; height: 25px; border-radius: 5px; border: 1px solid #d4af37; overflow: hidden; margin-top: 10px; }
        .hp-bar { height: 100%; width: 100%; transition: width 0.4s ease-out; }
        #hp-p { background: linear-gradient(90deg, #2ecc71, #27ae60); }
        #hp-e { background: linear-gradient(90deg, #e74c3c, #c0392b); }

        .spell-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .spell-card {
            background: #1a150f; border: 1px solid #5c4021; color: #f4e4bc;
            padding: 20px; cursor: pointer; transition: 0.3s; border-radius: 8px;
            font-family: 'Cinzel';
        }
        .spell-card:hover { border-color: #d4af37; transform: translateY(-3px); background: #2c1e11; }

        #log {
            height: 100px; overflow-y: auto; background: #000; border: 1px solid #333;
            margin-top: 25px; padding: 15px; font-size: 14px; text-align: left;
            color: #d4af37; border-radius: 5px;
        }

        #actions-end { display: none; margin-top: 20px; }
        .btn-final { background: #d4af37; color: #000; border: none; padding: 15px 30px; font-family: 'Cinzel'; font-weight: bold; cursor: pointer; border-radius: 5px; }
    </style>
</head>
<body>

    <audio id="snd-spell" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-hit" src="https://assets.mixkit.co/active_storage/sfx/1655/1655-preview.mp3"></audio>
    <audio id="snd-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <div class="arena-container">
        <h1>CLUB DE DUELO</h1>
        <div class="sub">HOGWARTS ORIÃ“N</div>

        <div class="stage">
            <div class="wizard">
                <div style="color: #d4af37;">MAGO (TÃš)</div>
                <div class="hp-container"><div id="hp-p" class="hp-bar"></div></div>
                <small id="txt-p">100 / 100 PV</small>
            </div>
            <div style="font-family: 'Cinzel'; font-size: 25px; color: #d4af37;">VS</div>
            <div class="wizard">
                <div style="color: #e74c3c;">RIVAL</div>
                <div class="hp-container"><div id="hp-e" class="hp-bar"></div></div>
                <small id="txt-e">100 / 100 PV</small>
            </div>
        </div>

        <div id="spell-menu">
            <div class="spell-grid">
                <button class="spell-card" onclick="atacar('Expelliarmus', 12, 18, '#d4af37')">EXPELLIARMUS âš¡</button>
                <button class="spell-card" onclick="atacar('Desmaius', 18, 25, '#3498db')">DESMAIUS ðŸ’«</button>
                <button class="spell-card" onclick="atacar('Rictusempra', 8, 30, '#f1c40f')">RICTUSEMPRA ðŸ˜‚</button>
                <button class="spell-card" onclick="atacar('Sectumsempra', 25, 40, '#c0392b')">SECTUMSEMPRA ðŸ©¸</button>
            </div>
        </div>

        <div id="log"><div class="log-entry">Varitas listas...</div></div>

        <div id="actions-end">
            <button class="btn-final" onclick="location.reload()">NUEVO DUELO ðŸ”„</button>
        </div>
    </div>

    <script>
        let pLife = 100, eLife = 100;
        let lock = false;

        // Funciones de sonido
        const playSnd = (id) => { 
            const s = document.getElementById(id); 
            s.currentTime = 0; 
            s.play().catch(e => console.log("Audio bloqueado por el navegador")); 
        };

        function atacar(nombre, min, max, color) {
            if(lock || pLife <= 0 || eLife <= 0) return;
            lock = true;

            playSnd('snd-spell');

            // Turno Jugador
            let dmg = Math.floor(Math.random() * (max - min + 1)) + min;
            eLife -= dmg;
            showLog(`ðŸª„ Â¡Lanzaste <b>${nombre}</b>! El rival pierde ${dmg} PV.`, color);
            updateBars();

            if(eLife <= 0) return finish(true);

            // Turno Enemigo
            setTimeout(() => {
                playSnd('snd-hit');
                let eDmg = Math.floor(Math.random() * 20) + 10;
                pLife -= eDmg;
                showLog(`ðŸ”¥ El rival responde. Pierdes ${eDmg} PV.`, "#e74c3c");
                updateBars();
                
                if(pLife <= 0) return finish(false);
                lock = false;
            }, 1000);
        }

        function updateBars() {
            if(pLife < 0) pLife = 0; if(eLife < 0) eLife = 0;
            document.getElementById('hp-p').style.width = pLife + "%";
            document.getElementById('hp-e').style.width = eLife + "%";
            document.getElementById('txt-p').innerText = `${pLife} PV`;
            document.getElementById('txt-e').innerText = `${eLife} PV`;
        }

        function showLog(msg, col) {
            const l = document.getElementById('log');
            l.innerHTML = `<div style="border-left: 3px solid ${col}; padding-left:10px; margin-bottom:5px;">${msg}</div>` + l.innerHTML;
        }

        function finish(win) {
            playSnd('snd-win');
            showLog(`<h2>${win ? 'Â¡VICTORIA!' : 'DERROTA'}</h2>`, "#d4af37");
            document.getElementById('spell-menu').style.display = 'none';
            document.getElementById('actions-end').style.display = 'block';
        }
    </script>
</body>
</html>
